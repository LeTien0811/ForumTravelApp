HÆ°á»›ng dáº«n chuyá»ƒn sang google map 

ChÃ o báº¡n\! **CÃ¢u tráº£ lá»i lÃ  CÃ“, hoÃ n toÃ n Ä‘Æ°á»£c\!**

ÄÃ¢y lÃ  má»™t tÃ­nh nÄƒng cá»±c ká»³ hay vÃ  lÃ  má»™t trong nhá»¯ng lÃ½ do chÃ­nh mÃ  chÃºng ta lÆ°u tá»a Ä‘á»™ (`LatLng`).

Báº¡n sáº½ khÃ´ng "váº½" Ä‘Æ°á»ng Ä‘i bÃªn trong á»©ng dá»¥ng cá»§a mÃ¬nh (vÃ¬ viá»‡c Ä‘Ã³ ráº¥t phá»©c táº¡p), mÃ  báº¡n sáº½ **"chuyá»ƒn giao"** (hand-off) tá»a Ä‘á»™ Ä‘Ã³ cho á»©ng dá»¥ng Google Maps (hoáº·c Apple Maps) Ä‘Ã£ Ä‘Æ°á»£c cÃ i trÃªn Ä‘iá»‡n thoáº¡i cá»§a ngÆ°á»i dÃ¹ng, vÃ  Ä‘á»ƒ á»©ng dá»¥ng Ä‘Ã³ lÃ m pháº§n viá»‡c "chá»‰ Ä‘Æ°á»ng".

CÃ¡ch lÃ m viá»‡c nÃ y trong Flutter lÃ  sá»­ dá»¥ng GÃ³i (Package) tÃªn lÃ  **`url_launcher`**.

-----

### ğŸš€ BÆ°á»›c 1: CÃ i Ä‘áº·t `url_launcher`

Trong terminal, hÃ£y cháº¡y lá»‡nh nÃ y:
`flutter pub add url_launcher`

-----

### ğŸ—ºï¸ BÆ°á»›c 2: Táº¡o hÃ m "Má»Ÿ Google Maps"

BÃ¢y giá», báº¡n cÃ³ thá»ƒ táº¡o má»™t hÃ m (báº¥t cá»© Ä‘Ã¢u) Ä‘á»ƒ xá»­ lÃ½ viá»‡c nÃ y. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ Ä‘áº·t nÃ³ trong `PostCard` hoáº·c trang chi tiáº¿t bÃ i Ä‘Äƒng.

```dart
import 'package:url_launcher/url_launcher.dart';
import 'package:latlong2/latlong.dart'; // (hoáº·c LatLng cá»§a google_maps)

/// Má»Ÿ á»©ng dá»¥ng Google Maps vÃ  chá»‰ Ä‘Æ°á»ng Ä‘áº¿n [destination]
Future<void> launchGoogleMapsDirections(LatLng destination) async {
  
  // Láº¥y lat, lng tá»« Ä‘á»‘i tÆ°á»£ng LatLng
  final double lat = destination.latitude;
  final double lng = destination.longitude;

  // 1. Táº¡o URL cho Google Maps
  // URL nÃ y sáº½ tá»± Ä‘á»™ng tÃ¬m "Ä‘Æ°á»ng Ä‘i" tá»« vá»‹ trÃ­ hiá»‡n táº¡i cá»§a ngÆ°á»i dÃ¹ng
  // Ä‘áº¿n 'destination'
  final String googleMapsUrl = 'https://www.google.com/maps/dir/?api=1&destination=$lat,$lng';
  
  // 2. Chuyá»ƒn Ä‘á»•i String sang Uri
  final Uri uri = Uri.parse(googleMapsUrl);

  // 3. Kiá»ƒm tra xem cÃ³ thá»ƒ má»Ÿ URL nÃ y khÃ´ng
  if (await canLaunchUrl(uri)) {
    // 4. Má»Ÿ Google Maps
    await launchUrl(
      uri,
      // Äáº£m báº£o nÃ³ má»Ÿ trong má»™t á»©ng dá»¥ng bÃªn ngoÃ i, khÃ´ng pháº£i WebView
      mode: LaunchMode.externalApplication, 
    );
  } else {
    // 5. Xá»­ lÃ½ lá»—i (vÃ­ dá»¥: trÃªn má»™t thiáº¿t bá»‹ láº¡ khÃ´ng cÃ³ trÃ¬nh duyá»‡t)
    print("KhÃ´ng thá»ƒ má»Ÿ Google Maps.");
    // (Báº¡n cÃ³ thá»ƒ hiá»ƒn thá»‹ SnackBar á»Ÿ Ä‘Ã¢y)
  }
}

// --- CÃCH Sá»¬ Dá»¤NG HÃ€M NÃ€Y ---
// VÃ­ dá»¥, trong trang chi tiáº¿t bÃ i Ä‘Äƒng cá»§a báº¡n:
//
// if (post.coordinates != null) // (Náº¿u bÃ i Ä‘Äƒng cÃ³ tá»a Ä‘á»™)
//   TextButton.icon(
//     icon: Icon(Icons.directions),
//     label: Text("Chá»‰ Ä‘Æ°á»ng"),
//     onPressed: () {
//       // Gá»i hÃ m vá»›i tá»a Ä‘á»™ Ä‘Ã£ lÆ°u
//       launchGoogleMapsDirections(post.coordinates!);
//     },
//   ),
```

-----

### âš ï¸ BÆ°á»›c 3: Cáº¥u hÃ¬nh Quyá»n (Báº®T BUá»˜C)

Ká»ƒ tá»« cÃ¡c phiÃªn báº£n Android vÃ  iOS má»›i, báº¡n pháº£i "khai bÃ¡o" cho há»‡ Ä‘iá»u hÃ nh biáº¿t ráº±ng á»©ng dá»¥ng cá»§a báº¡n *cÃ³ Ã½ Ä‘á»‹nh* má»Ÿ má»™t á»©ng dá»¥ng khÃ¡c (nhÆ° trÃ¬nh duyá»‡t hoáº·c Google Maps).

Báº¡n cáº§n thÃªm vÃ i dÃ²ng vÃ o file cáº¥u hÃ¬nh:

#### A. DÃ nh cho Android (file: `android/app/src/main/AndroidManifest.xml`)

ThÃªm khá»‘i `<queries>` nÃ y vÃ o bÃªn trong tháº» `<manifest>` (ngang hÃ ng vá»›i `<application>`):

```xml
<manifest ...>
    <application ...>
        <!-- ... -->
    </application>

    <!-- THÃŠM KHá»I NÃ€Y VÃ€O -->
    <queries>
      <!-- Cho phÃ©p má»Ÿ trÃ¬nh duyá»‡t (HTTPS) -->
      <intent>
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="https" />
      </intent>
      <!-- Cho phÃ©p má»Ÿ Google Maps (náº¿u cÃ i app) -->
      <intent>
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="google.navigation" />
      </intent>
    </queries>

</manifest>
```

#### B. DÃ nh cho iOS (file: `ios/Runner/Info.plist`)

ThÃªm cÃ¡c dÃ²ng nÃ y vÃ o tá»‡p `Info.plist` (thÆ°á»ng lÃ  á»Ÿ gáº§n cuá»‘i, bÃªn trong `<dict>`):

```xml
<key>LSApplicationQueriesSchemes</key>
<array>
  <!-- Cho phÃ©p gá»i Google Maps app -->
  <string>comgooglemaps</string>
  <!-- Cho phÃ©p gá»i Apple Maps -->
  <string>maps</string>
  <!-- Cho phÃ©p gá»i trÃ¬nh duyá»‡t -->
  <string>https</string>
</array>
```

Sau khi thÃªm cÃ¡c cáº¥u hÃ¬nh nÃ y vÃ  cháº¡y láº¡i á»©ng dá»¥ng, hÃ m `launchGoogleMapsDirections` sáº½ hoáº¡t Ä‘á»™ng hoÃ n háº£o\!